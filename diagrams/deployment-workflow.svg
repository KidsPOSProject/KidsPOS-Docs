<?xml version="1.0" encoding="UTF-8"?>
<!-- KidsPOS Deployment Workflow Diagram -->
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; }
      .step-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .step-text { font-family: Arial, sans-serif; font-size: 11px; }
      .phase-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .step-box { fill: #f5f5f5; stroke: #666; stroke-width: 1; }
      .decision-box { fill: #fff3e0; stroke: #ff9800; stroke-width: 2; }
      .success-box { fill: #e8f5e8; stroke: #4caf50; stroke-width: 2; }
      .arrow { stroke: #333; stroke-width: 2; marker-end: url(#arrowhead); }
      .decision-arrow { stroke: #ff9800; stroke-width: 2; marker-end: url(#arrowhead); }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">KidsPOS 現場展開ワークフロー</text>
  
  <!-- Phase 1: Pre-deployment -->
  <rect x="50" y="60" width="800" height="80" class="phase-box" rx="10"/>
  <text x="70" y="85" class="step-title">フェーズ1: 事前準備</text>
  
  <rect x="80" y="100" width="150" height="30" class="step-box" rx="5"/>
  <text x="155" y="120" text-anchor="middle" class="step-text">要件確認</text>
  
  <rect x="250" y="100" width="150" height="30" class="step-box" rx="5"/>
  <text x="325" y="120" text-anchor="middle" class="step-text">ハードウェア準備</text>
  
  <rect x="420" y="100" width="150" height="30" class="step-box" rx="5"/>
  <text x="495" y="120" text-anchor="middle" class="step-text">ネットワーク設計</text>
  
  <rect x="590" y="100" width="150" height="30" class="step-box" rx="5"/>
  <text x="665" y="120" text-anchor="middle" class="step-text">セキュリティ計画</text>
  
  <!-- Arrows for Phase 1 -->
  <line x1="230" y1="115" x2="250" y2="115" class="arrow"/>
  <line x1="400" y1="115" x2="420" y2="115" class="arrow"/>
  <line x1="570" y1="115" x2="590" y2="115" class="arrow"/>
  
  <!-- Phase 2: Server Setup -->
  <rect x="50" y="160" width="400" height="180" class="phase-box" rx="10"/>
  <text x="70" y="185" class="step-title">フェーズ2: サーバー環境構築</text>
  
  <rect x="80" y="200" width="150" height="30" class="step-box" rx="5"/>
  <text x="155" y="220" text-anchor="middle" class="step-text">OS・ミドルウェア</text>
  
  <rect x="80" y="240" width="150" height="30" class="step-box" rx="5"/>
  <text x="155" y="260" text-anchor="middle" class="step-text">MongoDB設定</text>
  
  <rect x="80" y="280" width="150" height="30" class="step-box" rx="5"/>
  <text x="155" y="300" text-anchor="middle" class="step-text">KidsPOS-Server展開</text>
  
  <rect x="270" y="240" width="150" height="50" class="decision-box" rx="5"/>
  <text x="345" y="260" text-anchor="middle" class="step-text">サーバー動作</text>
  <text x="345" y="275" text-anchor="middle" class="step-text">テスト</text>
  
  <!-- Server setup arrows -->
  <line x1="155" y1="230" x2="155" y2="240" class="arrow"/>
  <line x1="155" y1="270" x2="155" y2="280" class="arrow"/>
  <line x1="230" y1="295" x2="270" y2="265" class="decision-arrow"/>
  
  <!-- Phase 3: Android Setup -->
  <rect x="470" y="160" width="380" height="180" class="phase-box" rx="10"/>
  <text x="490" y="185" class="step-title">フェーズ3: Android端末設定</text>
  
  <rect x="500" y="200" width="130" height="30" class="step-box" rx="5"/>
  <text x="565" y="220" text-anchor="middle" class="step-text">デバイス設定</text>
  
  <rect x="500" y="240" width="130" height="30" class="step-box" rx="5"/>
  <text x="565" y="260" text-anchor="middle" class="step-text">APKインストール</text>
  
  <rect x="500" y="280" width="130" height="30" class="step-box" rx="5"/>
  <text x="565" y="300" text-anchor="middle" class="step-text">初期設定</text>
  
  <rect x="670" y="240" width="150" height="50" class="decision-box" rx="5"/>
  <text x="745" y="260" text-anchor="middle" class="step-text">アプリ動作</text>
  <text x="745" y="275" text-anchor="middle" class="step-text">テスト</text>
  
  <!-- Android setup arrows -->
  <line x1="565" y1="230" x2="565" y2="240" class="arrow"/>
  <line x1="565" y1="270" x2="565" y2="280" class="arrow"/>
  <line x1="630" y1="295" x2="670" y2="265" class="decision-arrow"/>
  
  <!-- Phase 4: Integration Testing -->
  <rect x="50" y="360" width="800" height="120" class="phase-box" rx="10"/>
  <text x="70" y="385" class="step-title">フェーズ4: 統合テスト</text>
  
  <rect x="100" y="400" width="120" height="30" class="step-box" rx="5"/>
  <text x="160" y="420" text-anchor="middle" class="step-text">通信テスト</text>
  
  <rect x="240" y="400" width="120" height="30" class="step-box" rx="5"/>
  <text x="300" y="420" text-anchor="middle" class="step-text">機能テスト</text>
  
  <rect x="380" y="400" width="120" height="30" class="step-box" rx="5"/>
  <text x="440" y="420" text-anchor="middle" class="step-text">負荷テスト</text>
  
  <rect x="520" y="400" width="120" height="30" class="step-box" rx="5"/>
  <text x="580" y="420" text-anchor="middle" class="step-text">セキュリティテスト</text>
  
  <rect x="660" y="390" width="150" height="50" class="decision-box" rx="5"/>
  <text x="735" y="410" text-anchor="middle" class="step-text">統合テスト</text>
  <text x="735" y="425" text-anchor="middle" class="step-text">完了</text>
  
  <!-- Integration testing arrows -->
  <line x1="220" y1="415" x2="240" y2="415" class="arrow"/>
  <line x1="360" y1="415" x2="380" y2="415" class="arrow"/>
  <line x1="500" y1="415" x2="520" y2="415" class="arrow"/>
  <line x1="640" y1="415" x2="660" y2="415" class="decision-arrow"/>
  
  <!-- Connection from server test to integration -->
  <line x1="345" y1="290" x2="345" y2="360" class="arrow"/>
  <line x1="745" y1="290" x2="745" y2="390" class="arrow"/>
  
  <!-- Phase 5: Production Deployment -->
  <rect x="50" y="500" width="800" height="100" class="success-box" rx="10"/>
  <text x="70" y="525" class="step-title">フェーズ5: 本番運用開始</text>
  
  <rect x="100" y="540" width="120" height="30" class="step-box" rx="5"/>
  <text x="160" y="560" text-anchor="middle" class="step-text">スタッフ研修</text>
  
  <rect x="240" y="540" width="120" height="30" class="step-box" rx="5"/>
  <text x="300" y="560" text-anchor="middle" class="step-text">運用開始</text>
  
  <rect x="380" y="540" width="120" height="30" class="step-box" rx="5"/>
  <text x="440" y="560" text-anchor="middle" class="step-text">監視設定</text>
  
  <rect x="520" y="540" width="120" height="30" class="step-box" rx="5"/>
  <text x="580" y="560" text-anchor="middle" class="step-text">バックアップ設定</text>
  
  <rect x="660" y="540" width="150" height="30" class="success-box" rx="5"/>
  <text x="735" y="560" text-anchor="middle" class="step-title">運用完了</text>
  
  <!-- Production arrows -->
  <line x1="220" y1="555" x2="240" y2="555" class="arrow"/>
  <line x1="360" y1="555" x2="380" y2="555" class="arrow"/>
  <line x1="500" y1="555" x2="520" y2="555" class="arrow"/>
  <line x1="640" y1="555" x2="660" y2="555" class="arrow"/>
  
  <!-- Connection from integration to production -->
  <line x1="735" y1="440" x2="735" y2="500" class="arrow"/>
  
  <!-- Decision flow back arrows -->
  <path d="M 270 250 Q 250 220 270 220 Q 290 220 290 200 L 420 200 Q 440 200 440 220 Q 440 240 420 240 L 270 250"
        fill="none" stroke="#ff9800" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="350" y="195" text-anchor="middle" class="step-text" fill="#ff9800">失敗時は設定見直し</text>
  
  <path d="M 670 250 Q 650 220 670 220 Q 690 220 690 200 L 820 200 Q 840 200 840 220 Q 840 240 820 240 L 670 250"
        fill="none" stroke="#ff9800" stroke-width="2" stroke-dasharray="3,3"/>
  
  <!-- Legend -->
  <rect x="50" y="620" width="800" height="60" fill="#f9f9f9" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="70" y="640" class="step-title">凡例:</text>
  
  <rect x="120" y="645" width="30" height="15" class="step-box"/>
  <text x="160" y="655" class="step-text">作業ステップ</text>
  
  <rect x="250" y="645" width="30" height="15" class="decision-box"/>
  <text x="290" y="655" class="step-text">確認・判定</text>
  
  <rect x="380" y="645" width="30" height="15" class="success-box"/>
  <text x="420" y="655" class="step-text">完了・成功</text>
  
  <line x1="500" y1="652" x2="530" y2="652" class="arrow"/>
  <text x="540" y="655" class="step-text">進行フロー</text>
  
  <line x1="620" y1="652" x2="650" y2="652" stroke="#ff9800" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="660" y="655" class="step-text">失敗時の戻りフロー</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
</svg>